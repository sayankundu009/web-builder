var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,r)=>{for(var c in r||(r={}))t.call(r,c)&&l(e,c,r[c]);if(a)for(var c of a(r))n.call(r,c)&&l(e,c,r[c]);return e};import"./dynamic-import-polyfill.b3685604.js";import{c,a as s,D as i,F as o,B as m,b as d,u,d as E,e as p,f as g,g as f,h,i as v,j as x,P as w,k as b,S as y,R as N,l as k}from"./vendor.46cbebb0.js";const S={pages:{ELEMENTS:1,LAYERS:2,ASSETS:3,SETTINGS:4},currentPage:1},T="NAVIGATION_UPDATE_CURRENT_PAGE";const C={elements:new Map,mainDocument:null},L="ELEMENTS_UPDATE_ELEMENT_LIST",_="ELEMENTS_UPDATE_MAIN_DOCUMENT";const A={name:"Untitled",assets:[]},D="PROJECT_UPDATE_NAME",M="PROJECT_UPDATE_ASSETS";function R(e){return{type:M,payload:{assets:e}}}const I=s(c({navigationReducer:function(e=S,t){switch(t.type){case T:return r(r({},e),{currentPage:t.payload.page});default:return e}},elementsReducer:function(e=C,t){switch(t.type){case L:{const a=t.payload.items,n=new Map;return a.forEach((e=>{n.set(e.id,e)})),r(r({},e),{elements:n})}case _:{const a=t.payload.doc;return r(r({},e),{mainDocument:a})}default:return e}},projectReducer:function(e=A,t){switch(t.type){case D:{const a=t.payload.name;return r(r({},e),{name:a})}case M:{const a=t.payload.assets;return r(r({},e),{assets:[...a]})}default:return e}}}));function P(){const e=new BroadcastChannel("editor-channel");e.addEventListener("message",(({data:e})=>{switch(e.action){case"INIT":z({action:"SETUP",payload:B()})}})),window._EDITOR_CHANNEL_=e}function z(e){window._EDITOR_CHANNEL_.postMessage(e)}function H(){let e="";const{elementsReducer:{mainDocument:t}}=I.getState();return t&&t.body&&(e=t.body.innerHTML),e}function j(){const{projectReducer:{assets:e}}=I.getState();return[...e]}function B(){return{favicon:document.querySelector("link[rel~='icon']").href,title:"Untitled",html:H(),assets:j()}}var O=()=>{let e=null;return i.createElement("nav",{className:"bg-background dark:bg-background-dark shadow"},i.createElement("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-4"},i.createElement("div",{className:"relative flex items-center justify-between h-16"},i.createElement("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden"},i.createElement("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false"},i.createElement("span",{className:"sr-only"},"Open main menu"),i.createElement("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})),i.createElement("svg",{className:"hidden h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),i.createElement("div",{className:"flex-1 flex items-center justify-center sm:items-stretch sm:justify-start"},i.createElement("div",{className:"flex-shrink-0 flex items-center"},i.createElement("h1",{className:"text-lg dark:text-white",role:"button"},"Untitled"))),i.createElement("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"},i.createElement("div",{className:"hidden sm:block sm:ml-6"},i.createElement("div",{className:"flex space-x-1"},i.createElement("span",{role:"button",className:"dark:text-white hover:text-white hover:bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center",onClick:function(){z({action:"UPDATE_PREVIEW",payload:{html:H(),assets:j()}})}},i.createElement(o,{className:"text-lg mr-2 mt-1"})," ",i.createElement("span",{className:"vertical-align-middle"},"Save")),i.createElement("span",{role:"button",className:"dark:text-white hover:text-white hover:bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center",onClick:function(){e&&!e.closed?e.focus():e=window.open("/preview/")}},i.createElement(m,{className:"text-lg mr-2 mt-1"})," ",i.createElement("span",{className:"vertical-align-middle"},"Preview")),i.createElement("span",{role:"button",className:"dark:text-white hover:text-white hover:bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center"},i.createElement(d,{className:"text-lg mr-2 mt-1"})," ",i.createElement("span",{className:"vertical-align-middle"},"Code"))))))),i.createElement("div",{className:"sm:hidden",id:"mobile-menu"},i.createElement("div",{className:"px-2 pt-2 pb-3 space-y-1"},i.createElement("a",{href:"#",className:"text-gray-700 hover:text-white hover:bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center"},i.createElement(o,{className:"text-lg mr-2 mt-1"})," ",i.createElement("span",{className:"vertical-align-middle"},"Save")),i.createElement("a",{href:"#",className:"text-gray-700 hover:text-white hover:bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center"},i.createElement(m,{className:"text-lg mr-2 mt-1"})," ",i.createElement("span",{className:"vertical-align-middle"},"Preview")),i.createElement("a",{href:"#",className:"text-gray-700 hover:text-white hover:bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center"},i.createElement(d,{className:"text-lg mr-2 mt-1"})," ",i.createElement("span",{className:"vertical-align-middle"},"Code")))))};function V(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-front",height:"1em",width:"1em",viewBox:"0 0 16 16"},i.createElement("path",{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5z"}))}function $(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-box-seam",height:"1em",width:"1em",viewBox:"0 0 16 16"},i.createElement("path",{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"}))}function U(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor",className:"inline",viewBox:"0 0 16 16"},i.createElement("path",{d:"M0 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V2zm8.5 0v8H15V2H8.5zm0 9v3H15v-3H8.5zm-1-9H1v3h6.5V2zM1 14h6.5V6H1v8z"}))}function G(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor",className:"inline",viewBox:"0 0 16 16"},i.createElement("path",{d:"M12.258 3h-8.51l-.083 2.46h.479c.26-1.544.758-1.783 2.693-1.845l.424-.013v7.827c0 .663-.144.82-1.3.923v.52h4.082v-.52c-1.162-.103-1.306-.26-1.306-.923V3.602l.431.013c1.934.062 2.434.301 2.693 1.846h.479L12.258 3z"}))}function Y(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",width:"1em",fill:"currentColor",className:"inline",viewBox:"0 0 16 16"},i.createElement("path",{d:"M10.5 15a.5.5 0 0 1-.5-.5V2H9v12.5a.5.5 0 0 1-1 0V9H7a4 4 0 1 1 0-8h5.5a.5.5 0 0 1 0 1H11v12.5a.5.5 0 0 1-.5.5z"}))}var q="_logo_1cgqi_1",W=()=>{const e=u(),{pages:t,currentPage:a}=E((({navigationReducer:e})=>e));function n(e){return a==e?"bg-main dark:bg-main-dark text-white":""}function l(t){e(function(e=1){return{type:T,payload:{page:e}}}(t))}return i.createElement("div",{className:"h-screen w-16 bg-background dark:bg-background-dark border-r border-borderColor dark:border-borderColor-dark shadow"},i.createElement("div",{role:"button",className:"my-3 mx-auto mb-4 rounded-full h-12 w-12 flex items-center justify-center border"},i.createElement("a",{href:"",className:"dark:text-white text-2xl text-center transform rotate-12"},i.createElement(p,null))),i.createElement("div",{role:"button",className:`${q} ${n(t.ELEMENTS)}`,onClick:()=>l(t.ELEMENTS)},i.createElement("span",{className:"dark:text-white text-2xl text-center"},i.createElement(V,null))),i.createElement("div",{role:"button",className:`${q} ${n(t.LAYERS)}`,onClick:()=>l(t.LAYERS)},i.createElement("span",{className:"dark:text-white text-2xl text-center"},i.createElement(g,null))),i.createElement("div",{role:"button",className:`${q} ${n(t.ASSETS)}`,onClick:()=>l(t.ASSETS)},i.createElement("span",{className:"dark:text-white text-2xl text-center"},i.createElement($,null))),i.createElement("div",{role:"button",className:`${q} ${n(t.SETTINGS)}`,onClick:()=>l(t.SETTINGS)},i.createElement("span",{className:"dark:text-white text-2xl text-center"},i.createElement(f,null))))};function F(e){return"BODY"==e.tagName}function J(e,t){if(null==e)return"";const a=e.getBoundingClientRect(),n=t-a.top-a.height/2;let l="";return n<10&&n>-10?l="inside":n<-10?l="prepend":n>10&&(l="append"),l}function K(e){e.removeAttribute("editor-insert-preview")}function Q(e){var t;null==(t=null==e?void 0:e.dataTransfer)||t.setData("text/plain",e.target.dataset.elementId||""),e.currentTarget.style.opacity="0.5"}function X(e){var t,a,n;const l=parseInt(null==(t=e.dataTransfer)?void 0:t.getData("text"));let r=e.target;K(r),console.log(r.tagName),null==(a=e.dataTransfer)||a.clearData();const c=F(r)?"inside":J(r,e.clientY),{elementsReducer:{elements:s}}=I.getState(),i=null==s?void 0:s.get(l);!function(e,t,a="inside"){var n,l;if(null==e)return 0;switch(a){case"inside":t.appendChild(e);break;case"prepend":null==(n=t.parentElement)||n.insertBefore(e,t);break;case"append":null==(l=t.parentElement)||l.insertBefore(e,t.nextElementSibling)}}(function(e){if(e)return(new DOMParser).parseFromString(e,"text/html").body.firstElementChild;return null}((null==i?void 0:i.template)||""),r,c),null==(n=e.dataTransfer)||n.clearData()}function Z(e){e.target.style.removeProperty("opacity")}var ee=e=>{const t=u(),[a,n]=i.useState(!0),[l,r]=i.useState([]),[c,s]=i.useState([]),[o,m]=i.useState("");function d(){const e=[{id:1,name:"section",display_name:"Section",icon:i.createElement(h,{className:"inline"}),template:"<section builder-section></section>"},{id:2,name:"heading",display_name:"Heading",icon:i.createElement(G,null),template:"<h1>Hello</h1>"},{id:3,name:"text",display_name:"Text",icon:i.createElement(Y,null),template:"<p>Text</p>"},{id:4,name:"grid",display_name:"Grid",icon:i.createElement(U,null),template:"<div editor-grid></div>"}];var a;r(e),s(e),t((a=e.map((({id:e,name:t,display_name:a,template:n})=>({id:e,name:t,display_name:a,template:n}))),{type:L,payload:{items:a}})),n(!1)}return i.useEffect((()=>{d()}),[]),i.useEffect((()=>{a||s((()=>o?l.filter((e=>e.display_name.toLowerCase().match(o.toLowerCase()))):l))}),[o]),i.createElement("div",{style:{display:e.show?"initial":"none"}},i.createElement("div",{className:"p-3 pt-5"},i.createElement("div",{className:"container"},i.createElement("input",{type:"text",className:"px-3 py-3 placeholder-gray-800 dark:placeholder-gray-300 dark:text-white relative bg-background-secondary dark:bg-background-secondary-dark rounded text-sm border-0 outline-none focus:outline-none w-full",placeholder:"Search elements",value:o,onChange:function(e){var t;m((null==(t=e.target)?void 0:t.value)||"")}})),i.createElement("div",{className:"container grid grid-cols-2 gap-1 pt-5"},c.map((e=>i.createElement("div",{className:"bg-background-secondary dark:bg-background-secondary-dark w-full h-28 cursor-move",key:e.id,onDragStart:Q,onDragEnd:Z,"data-element-id":e.id,draggable:!0},i.createElement("div",{className:"text-center py-6"},i.createElement("div",{className:"text-center text-2xl mx-auto dark:text-white"},e.icon),i.createElement("div",{className:"dark:text-white mt-2"},i.createElement("span",null,e.display_name)))))))))},te=e=>{const t=1,a=2,[n,l]=i.useState(t);function r(e){return n==e}function c(e){return r(e)?"bg-background dark:bg-background-dark":"bg-background-secondary dark:bg-background-secondary-dark"}function s(e){l(e)}return i.createElement("div",{style:{display:e.show?"initial":"none"}},i.createElement("ul",{className:"flex cursor-pointer"},i.createElement("li",{className:`flex-1 text-center py-2 px-6 dark:text-white ${c(t)}`,onClick:()=>s(t)},"Design"),i.createElement("li",{className:`flex-1 text-center py-2 px-6 dark:text-white ${c(a)}`,onClick:()=>s(a)},"Style")),i.createElement(ee,{show:r(t)}))},ae=e=>i.createElement("div",{style:{display:e.show?"initial":"none"}},i.createElement("div",{className:"mx-2 my-1 dark:text-white"},i.createElement("h6",{className:"py-2 inline-flex items-center"},i.createElement(g,null),i.createElement("span",{className:"pl-1",style:{verticalAlign:"middle"}},"Layers")),i.createElement("hr",null)),i.createElement("div",{className:"p-2"})),ne=e=>{const t=u(),[a,n]=i.useState(!1),[l,r]=i.useState(""),c=E((({projectReducer:e})=>e.assets)),s=E((({elementsReducer:e})=>e.mainDocument));function o(e){let a=c[e];!function(e,t){var a;if(null==e||null==t)return null;console.log(e.querySelector(`link[id='${t}']`)),null==(a=e.querySelector(`link[id='${t}']`))||a.remove()}(s,a.id);const n=c.filter(((t,a)=>a!=e));t(R(n))}return i.createElement("div",{style:{display:e.show?"initial":"none"}},i.createElement("div",{className:"mx-2 my-1 dark:text-white"},i.createElement("h6",{className:"py-2 inline-flex items-center"},i.createElement($,null),i.createElement("span",{className:"pl-1",style:{verticalAlign:"middle"}},"Assets")),i.createElement("hr",null)),i.createElement("div",{className:"p-2"},i.createElement("div",{className:"container flex gap-2"},i.createElement("input",{type:"text",className:"px-3 py-3 placeholder-gray-800 dark:placeholder-gray-300 dark:text-white relative bg-background-secondary dark:bg-background-secondary-dark rounded text-sm border-0 outline-none focus:outline-none w-full",placeholder:"CDN links",value:l,onChange:e=>r(e.target.value)}),i.createElement("button",{role:"button",className:"dark:text-white text-white bg-main px-3 py-2 rounded-md text-sm font-medium inline-flex items-center focus:outline-none",onClick:function(){if(!l)return;if(e=l,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e))return;var e;let a=[...c];-1!=a.findIndex((({link:e})=>e==l))||(n(!0),fetch(l).then((e=>{if(200==e.status){const e=`editor-asset-link-${Date.now()}`;a=[...a,{id:e,name:(n=l,n&&(null==(i=null==(c=null==(r=null==n?void 0:n.split("\\"))?void 0:r.pop())?void 0:c.split("/"))?void 0:i.pop())||""),link:l||""}],function(e,t,a){if(null==e)return null;const n=e.getElementsByTagName("HEAD")[0],l=e.createElement("link");l.id=a,l.rel="stylesheet",l.type="text/css",l.href=t,n.appendChild(l)}(s,l,e),t(R(a))}var n,r,c,i})).catch((e=>{console.log(e)})).finally((()=>{r(""),n(!1)})))}},"Add")),i.createElement("div",{className:"container mt-4"},c.map(((e,t)=>i.createElement("div",{className:"flex",key:e.id},i.createElement("div",{className:"flex-1"},i.createElement("a",{href:e.link,target:"_blank",className:"inline-flex text-blue-500"},i.createElement("div",{className:"mt-1.5 mr-1"},i.createElement(v,null)),i.createElement("div",null,e.name))),i.createElement("div",{className:"mr-4 mt-1"},i.createElement("button",{onClick:()=>o(t),className:"text-red-500"},i.createElement(x,null)))))))))};function le(){return!!Boolean(localStorage.getItem("dark-mode"))}function re(){let e=document.querySelector("link[rel~='icon']");document.documentElement.classList.add("dark"),localStorage.setItem("dark-mode","true"),e.href="/assets/favicons/favicon-dark.ico"}function ce(){let e=document.querySelector("link[rel~='icon']");document.documentElement.classList.remove("dark"),localStorage.removeItem("dark-mode"),e.href="/assets/favicons/favicon.ico"}var se=e=>{const[t,a]=i.useState(!1);return i.useEffect((()=>{a(le())}),[]),i.createElement("div",{className:"mt-1"},i.createElement("div",{className:"flex"},i.createElement("span",{className:"flex-1 items-center dark:text-white"},"Dark mode"),i.createElement("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in m-0.5",onClick:function(e){t?ce():re(),a(!t)}},i.createElement("input",{type:"checkbox",name:"toggle",className:(t?"right-0":"")+" bg-white absolute block w-6 h-6 rounded-full border-4 appearance-none cursor-pointer",checked:t,onChange:()=>{}}),i.createElement("label",{className:(t?"bg-main":"dark:bg-white bg-background-secondary")+" toggle-label block overflow-hidden h-6 rounded-full cursor-pointer"}))))},ie=e=>i.createElement("div",{style:{display:e.show?"initial":"none"}},i.createElement("div",{className:"mx-2 my-1 dark:text-white"},i.createElement("h6",{className:"py-2 inline-flex items-center"},i.createElement(f,null),i.createElement("span",{className:"pl-1",style:{verticalAlign:"middle"}},"Settings")),i.createElement("hr",null)),i.createElement("div",{className:"p-2"},i.createElement(se,null))),oe=()=>{const{pages:e,currentPage:t}=E((({navigationReducer:e})=>e));function a(e){return t==e}return i.createElement("div",{className:"h-full m-2 w-80 bg-background dark:bg-background-dark shadow border dark:border-borderColor-dark"},i.createElement(te,{show:a(e.ELEMENTS)}),i.createElement(ae,{show:a(e.LAYERS)}),i.createElement(ne,{show:a(e.ASSETS)}),i.createElement(ie,{show:a(e.SETTINGS)}))},me=()=>{const e=u(),t=i.useRef(null);return i.useEffect((()=>{let a=setInterval((function(){var n;const l=t.current;let r=(null==l?void 0:l.contentDocument)||(null==(n=null==l?void 0:l.contentWindow)?void 0:n.document);if(["complete","interactive"].includes(r.readyState)){const t=l.contentDocument;null==t||t.body.addEventListener("dragover",(e=>function(e){e.preventDefault();let t=e.target;!function(e,t="inside"){e.setAttribute("editor-insert-preview",t)}(t,F(t)?"inside":J(t,e.clientY))}(e))),null==t||t.body.addEventListener("drop",(e=>X(e))),null==t||t.body.addEventListener("dragenter",(e=>function(e){(null==e?void 0:e.target).tagName}(e))),null==t||t.body.addEventListener("dragleave",(e=>function(e){K(e.target)}(e))),clearInterval(a),e({type:_,payload:{doc:t}})}}),1e3)}),[]),i.createElement("div",{className:"h-full m-2 ml-1 w-full shadow p-1.5 bg-background-secondary dark:bg-background-dark"},i.createElement("iframe",{src:"/playground/",className:"w-full h-full",ref:t}))},de=()=>(i.useEffect((()=>{P()}),[]),i.createElement(w,{store:I},i.createElement("main",null,i.createElement("div",{className:"flex flex-row"},i.createElement(W,null),i.createElement("div",{className:"h-screen w-full"},i.createElement(O,null),i.createElement("div",{className:"flex flex-row",style:{height:"calc(100% - 82px)"}},i.createElement(oe,null),i.createElement(me,null)))))));const ue=()=>(i.useEffect((()=>{le()?re():ce()}),[]),i.createElement(b,null,i.createElement(y,null,i.createElement(N,{exact:!0,path:"/"},i.createElement(de,null)))));k.render(i.createElement(i.StrictMode,null,i.createElement(ue,null)),document.getElementById("root"));
